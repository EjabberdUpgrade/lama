<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Module lama</title>
<link rel="stylesheet" type="text/css" href="stylesheet.css" title="EDoc">
</head>
<body bgcolor="white">
<div class="navbar"><a name="#navbar_top"></a><table width="100%" border="0" cellspacing="0" cellpadding="2" summary="navigation bar"><tr><td><a href="overview-summary.html" target="overviewFrame">Overview</a></td><td><a href="http://www.erlang.org/"><img src="erlang.png" align="right" border="0" alt="erlang logo"></a></td></tr></table></div>
<hr>

<h1>Module lama</h1>
<ul class="index"><li><a href="#description">Description</a></li><li><a href="#types">Data Types</a></li><li><a href="#index">Function Index</a></li><li><a href="#functions">Function Details</a></li></ul>This module implements LAMA - Log and Alarm Management Applicaiton.

<p><b>Version:</b> $Rev: 727 $
            $LastChangedDate: 2007-03-27 18:10:43 -0400 (Tue, 27 Mar 2007) $</p>
<p><b>Authors:</b> Serge Aleynikov (<a href="mailto:saleyn@gmail.com"><tt>saleyn@gmail.com</tt></a>).</p>

<h2><a name="description">Description</a></h2>This module implements LAMA - Log and Alarm Management Applicaiton.
   This module provides interface functions for .<p> </p>
  
<h2><a name="types">Data Types</a></h2>

<h3 class="typedecl"><a name="type-expected_type">expected_type()</a></h3>
<p><tt>expected_type() = ExpectedType</tt>
<ul class="definitions"><li><tt>ExpectedType = atom | {value, ValidItems::list()} | tuple | boolean | string | integer | {integer, Min::integer(), Max::integer()} | float | {float, Min::float(), Max::float()} | list | {list, ValidItems::list()} | {list_of, Type} | Fun</tt></li><li><tt>Type = integer | float | atom | list | tuple | number | string | ValidItems</tt></li><li><tt>Fun = fun((Opt, Value) -&gt; ok) | <a href="#type-throw">throw</a>({error, {bad_config, {Key, Val}, Reason}})</tt></li><li><tt>ValidItems = list()</tt></li></ul></p>


<h3 class="typedecl"><a name="type-option">option()</a></h3>
<p><tt>option() = {Option::atom(), Value::term()}</tt></p>


<h3 class="typedecl"><a name="type-options">options()</a></h3>
<p><tt>options() = [Option::<a href="#type-option">option()</a>]</tt></p>


<h3 class="typedecl"><a name="type-typed_option">typed_option()</a></h3>
<p><tt>typed_option() = {Option::atom(), Value::term(), ExpType::<a href="#type-expected_type">expected_type()</a>}</tt></p>


<h3 class="typedecl"><a name="type-typed_options">typed_options()</a></h3>
<p><tt>typed_options() = [TypedOption::<a href="#type-typed_option">typed_option()</a>]</tt></p>


<h2><a name="index">Function Index</a></h2>
<table width="100%" border="1" cellspacing="0" cellpadding="2" summary="function index"><tr><td valign="top"><a href="#add_alarm_trap-3">add_alarm_trap/3</a></td><td>Add an alarm to trap mapping to the internal #state.alarm_map list.</td></tr>
<tr><td valign="top"><a href="#check_alarm-2">check_alarm/2</a></td><td>Based on the return value of Fun set or clear an Alarm.</td></tr>
<tr><td valign="top"><a href="#clear_alarm-1">clear_alarm/1</a></td><td>Clear alarm that was previously set by set_alarm/1.</td></tr>
<tr><td valign="top"><a href="#create_release_file-2">create_release_file/2</a></td><td>Create a release file given a release template file.</td></tr>
<tr><td valign="top"><a href="#create_release_file-3">create_release_file/3</a></td><td>Create a release file given a release template file.</td></tr>
<tr><td valign="top"><a href="#filename-2">filename/2</a></td><td>Create a filename by (optionally) appending ".YYYYMMDD" to
       <code>Filename</code>.</td></tr>
<tr><td valign="top"><a href="#format_pid-1">format_pid/1</a></td><td></td></tr>
<tr><td valign="top"><a href="#get_alarms-0">get_alarms/0</a></td><td>Get currently active alarms.</td></tr>
<tr><td valign="top"><a href="#get_app_env-3">get_app_env/3</a></td><td>Fetch a value of the application's environment variable <code>Key</code>.</td></tr>
<tr><td valign="top"><a href="#get_app_env-4">get_app_env/4</a></td><td>Fetch a value of the application's environment variable <code>Key</code>.</td></tr>
<tr><td valign="top"><a href="#get_app_opt-3">get_app_opt/3</a></td><td>Same as get_app_env/3, but returns an Option tuple {Key, Value}
       rather than just a Value.</td></tr>
<tr><td valign="top"><a href="#get_app_opt-4">get_app_opt/4</a></td><td>Same as get_app_env/4 but returns a tuple {Key, Value} rather than
       a Value.</td></tr>
<tr><td valign="top"><a href="#get_app_options-3">get_app_options/3</a></td><td>Look up TypedOptions in the environment.</td></tr>
<tr><td valign="top"><a href="#get_app_options2-3">get_app_options2/3</a></td><td>Same as get_app_options/3, but will override environment options
       with values in the <code>Overrides</code> list, instead of using them as
       defaults.</td></tr>
<tr><td valign="top"><a href="#get_opt-2">get_opt/2</a></td><td>Fetch the Option's value from the <code>Options</code> list.</td></tr>
<tr><td valign="top"><a href="#get_opt-3">get_opt/3</a></td><td>Same as get_opt/2, but instead of throwing an error, it returns
       a <code>Default</code> value if the <code>Opt</code> is not in the <code>Options</code> list.</td></tr>
<tr><td valign="top"><a href="#os_path-1">os_path/1</a></td><td>Perform replacement of environment variable values in the OsPath.</td></tr>
<tr><td valign="top"><a href="#set_alarm-1">set_alarm/1</a></td><td>Set alarm.</td></tr>
<tr><td valign="top"><a href="#start-0">start/0</a></td><td>Start LAMA application.</td></tr>
<tr><td valign="top"><a href="#stop-0">stop/0</a></td><td>Stop LAMA application.</td></tr>
<tr><td valign="top"><a href="#verify_config-1">verify_config/1</a></td><td>For each <code>Option</code> in the <code>Options</code> list
       perform type verification.</td></tr>
<tr><td valign="top"><a href="#verify_config-2">verify_config/2</a></td><td>Fetch selected options from the application's environment and
       perform type verification.</td></tr>
<tr><td valign="top"><a href="#which_loggers-0">which_loggers/0</a></td><td>Return a list of registered loggers.</td></tr>
<tr><td valign="top"><a href="#which_loggers-1">which_loggers/1</a></td><td>Return a list of registered loggers.</td></tr>
</table>

<h2><a name="functions">Function Details</a></h2>

<h3 class="function"><a name="add_alarm_trap-3">add_alarm_trap/3</a></h3>
<div class="spec">
<p><tt>add_alarm_trap(AlarmID::atom(), Trap::atom(), Varbinds::list()) -&gt; ok</tt><br></p>
</div><p>Add an alarm to trap mapping to the internal #state.alarm_map list.
  Same as <a href="lama_alarm_h.html#add_alarm_trap-3"><code>lama_alarm_h:add_alarm_trap/3</code></a>.</p>
<p><b>See also:</b> <a href="lama_alarm_h.html#add_alarm_trap-3">lama_alarm_h:add_alarm_trap/3</a>.</p>

<h3 class="function"><a name="check_alarm-2">check_alarm/2</a></h3>
<div class="spec">
<p><tt>check_alarm(Fun::function(), Alarm::<a href="#type-alarm">alarm()</a>) -&gt; ok</tt>
<ul class="definitions"><li><tt>Fun = fun(() -&gt; boolean()) | {true, Varbinds}</tt></li><li><tt>Varbinds = list()</tt></li><li><tt><a name="type-alarm">alarm()</a> = <a href="lama_alarm_h.html#type-alarm">lama_alarm_h:alarm()</a></tt></li></ul></p>
</div><p>Based on the return value of Fun set or clear an Alarm.</p>

<h3 class="function"><a name="clear_alarm-1">clear_alarm/1</a></h3>
<div class="spec">
<p><tt>clear_alarm(AlarmId::<a href="#type-alarm_id">alarm_id()</a>) -&gt; ok</tt>
<ul class="definitions"><li><tt><a name="type-alarm_id">alarm_id()</a> = <a href="lama_alarm_h.html#type-alarm_id">lama_alarm_h:alarm_id()</a></tt></li></ul></p>
</div><p>Clear alarm that was previously set by set_alarm/1. This function
       is equivalent to <a href="lama_alarm_h.html#clear_alarm-1"><code>lama_alarm_h:clear_alarm/1</code></a>.</p>
<p><b>See also:</b> <a href="#check_alarm-2">check_alarm/2</a>, <a href="lama_alarm_h.html#clear_alarm-1">lama_alarm_h:clear_alarm/1</a>.</p>

<h3 class="function"><a name="create_release_file-2">create_release_file/2</a></h3>
<div class="spec">
<p><tt>create_release_file(TemplateRelFile, OutRelFile) -&gt; ok</tt>
<ul class="definitions"><li><tt>TemplateRelFile = <a href="#type-filename">filename()</a></tt></li><li><tt>OutRelFile = <a href="#type-filename">filename()</a></tt></li></ul></p>
</div><p>Create a release file given a release template file.</p>
<p><b>See also:</b> <a href="#create_release_file-3">create_release_file/3</a>.</p>

<h3 class="function"><a name="create_release_file-3">create_release_file/3</a></h3>
<div class="spec">
<p><tt>create_release_file(TemplateRelFile, OutRelFile, Vsn) -&gt; ok</tt>
<ul class="definitions"><li><tt>TemplateRelFile = <a href="#type-filename">filename()</a></tt></li><li><tt>OutRelFile = <a href="#type-filename">filename()</a></tt></li><li><tt>Vsn = string()</tt></li></ul></p>
</div><p>Create a release file given a release template file.  The
       release template file should have the same structure as the
       release file.  This function will ensure that latest
       application versions are included in the release.  It will
       also ensure that the latest erts version is specified in
       the release file.  Note that both arguments may contain the
       ".rel" extension, however the actual TemplateRelFile must
       have a ".rel" extension.  The TemplateRelFile doesn't need
       to contain application version numbers - an empty string will
       do: <code>{kernel, ""}</code>.  This function will populate
       the version number with current version of the application.
       <code>Vsn</code> is the version number associated with the generated
       release file.  If it is <code>undefined</code>, the version from the
       <code>TemplateRelFile</code> will be used.
  <pre>  Example:
    lama:create_release_file(".drp.template.rel", "./ebin/drp.rel").</pre></p>

<h3 class="function"><a name="filename-2">filename/2</a></h3>
<div class="spec">
<p><tt>filename(Filename::string(), X2::Date) -&gt; string()</tt>
<ul class="definitions"><li><tt>Date = <a href="#type-date">date()</a> | date | undefined</tt></li></ul></p>
</div><p>Create a filename by (optionally) appending ".YYYYMMDD" to
       <code>Filename</code>.  The date suffix is appended only if Date is passed
       as <code>date()</code> or <code>date</code>.</p>

<h3 class="function"><a name="format_pid-1">format_pid/1</a></h3>
<div class="spec">
<p><tt>format_pid(Pid) -&gt; any()</tt></p>
</div>

<h3 class="function"><a name="get_alarms-0">get_alarms/0</a></h3>
<div class="spec">
<p><tt>get_alarms() -&gt; Alarms</tt>
<ul class="definitions"><li><tt>Alarms = [Alarm::<a href="#type-alarm">alarm()</a>]</tt></li></ul></p>
</div><p>Get currently active alarms.</p>

<h3 class="function"><a name="get_app_env-3">get_app_env/3</a></h3>
<div class="spec">
<p><tt>get_app_env(App::atom(), Key::atom(), Default::term()) -&gt; Value::term()</tt><br></p>
</div><p>Fetch a value of the application's environment variable <code>Key</code>.
       Use <code>Default</code> if that value is not set.</p>

<h3 class="function"><a name="get_app_env-4">get_app_env/4</a></h3>
<div class="spec">
<p><tt>get_app_env(App::atom(), Key::atom(), Default::term(), ExpectedType::<a href="#type-expected_type">expected_type()</a>) -&gt; Value::term()</tt><br></p>
</div><p>Fetch a value of the application's environment variable <code>Key</code>.
       Use <code>Default</code> if that value is not set.  Perform validation of
       value type given ExpectedType.</p>
<p><b>See also:</b> <a href="#get_app_env-5">get_app_env/5</a>.</p>

<h3 class="function"><a name="get_app_opt-3">get_app_opt/3</a></h3>
<div class="spec">
<p><tt>get_app_opt(App::atom(), Key::atom(), Default::term()) -&gt; Option::<a href="#type-option">option()</a></tt><br></p>
</div><p>Same as get_app_env/3, but returns an Option tuple {Key, Value}
       rather than just a Value.</p>

<h3 class="function"><a name="get_app_opt-4">get_app_opt/4</a></h3>
<div class="spec">
<p><tt>get_app_opt(App::atom(), Key::atom(), Default::term(), ExpectedType::<a href="#type-expected_type">expected_type()</a>) -&gt; Option::<a href="#type-option">option()</a></tt><br></p>
</div><p>Same as get_app_env/4 but returns a tuple {Key, Value} rather than
       a Value.</p>
<p><b>See also:</b> <a href="#get_app_env-4">get_app_env/4</a>, <a href="#get_opt-2">get_opt/2</a>, <a href="#get_opt-3">get_opt/3</a>.</p>

<h3 class="function"><a name="get_app_options-3">get_app_options/3</a></h3>
<div class="spec">
<p><tt>get_app_options(App::atom(), DefOptions::<a href="#type-options">options()</a>, TypedOptions::<a href="#type-typed_options">typed_options()</a>) -&gt; Options::<a href="#type-options">options()</a></tt><br></p>
</div><p>Look up TypedOptions in the environment. If not found use defaults
       in the DefOptions list, and if not found there, use the default
       value from a TypedOption's tuple: {_Key, DefaultValue, _Type}.
  <pre>  Example:
     start_application(StartArgs) -&gt;
         get_app_options(test, StartArgs, [{file, "bar", string}]),
         ... .
 
     start_application([])              -&gt;   [{file, "bar"}]
     start_application([{file, "foo"}]) -&gt;   [{file, "foo"}]
 
     If application's environment had {file, "zzz"}, than this tuple
     would've been returned instead.</pre></p>
<p><b>See also:</b> <a href="#get_app_env-4">get_app_env/4</a>.</p>

<h3 class="function"><a name="get_app_options2-3">get_app_options2/3</a></h3>
<div class="spec">
<p><tt>get_app_options2(App::atom(), Overrides::<a href="#type-options">options()</a>, TypedOptions::<a href="#type-typed_options">typed_options()</a>) -&gt; Options::<a href="#type-options">options()</a></tt><br></p>
</div><p>Same as get_app_options/3, but will override environment options
       with values in the <code>Overrides</code> list, instead of using them as
       defaults.</p>

<h3 class="function"><a name="get_opt-2">get_opt/2</a></h3>
<div class="spec">
<p><tt>get_opt(Opt::atom(), Options) -&gt; term() | <a href="#type-throw">throw</a>({error, Reason})</tt>
<ul class="definitions"><li><tt>Options = [{Option::atom(), Value::term()}]</tt></li></ul></p>
</div><p>Fetch the Option's value from the <code>Options</code> list</p>
<p><b>See also:</b> <a href="#get_app_env-4">get_app_env/4</a>, <a href="#get_app_env-5">get_app_env/5</a>, <a href="#get_opt-3">get_opt/3</a>.</p>

<h3 class="function"><a name="get_opt-3">get_opt/3</a></h3>
<div class="spec">
<p><tt>get_opt(Opt::atom(), Options, Default::term()) -&gt; term()</tt>
<ul class="definitions"><li><tt>Options = [{Option::atom(), Value::term()}]</tt></li></ul></p>
</div><p>Same as get_opt/2, but instead of throwing an error, it returns
       a <code>Default</code> value if the <code>Opt</code> is not in the <code>Options</code> list.</p>
<p><b>See also:</b> <a href="#get_app_env-4">get_app_env/4</a>, <a href="#get_app_env-5">get_app_env/5</a>, <a href="#get_opt-2">get_opt/2</a>.</p>

<h3 class="function"><a name="os_path-1">os_path/1</a></h3>
<div class="spec">
<p><tt>os_path(OsPath) -&gt; Path::string()</tt>
<ul class="definitions"><li><tt>OsPath = string() | binary()</tt></li></ul></p>
</div><p>Perform replacement of environment variable values in the OsPath.
  <pre>     Example:
        lama:os_path("~/${HOME}/myapp") -&gt; "/home/user//home/user/myapp"</pre></p>
<p><b>See also:</b> <a href="os.html#getenv-1">os:getenv/1</a>.</p>

<h3 class="function"><a name="set_alarm-1">set_alarm/1</a></h3>
<div class="spec">
<p><tt>set_alarm(Alarm::<a href="#type-alarm">alarm()</a>) -&gt; ok</tt>
<ul class="definitions"><li><tt><a name="type-alarm">alarm()</a> = <a href="lama_alarm_h.html#type-alarm">lama_alarm_h:alarm()</a></tt></li></ul></p>
</div><p>Set alarm. This function
       is equivalent to <a href="lama_alarm_h.html#set_alarm-1"><code>lama_alarm_h:set_alarm/1</code></a>.</p>
<p><b>See also:</b> <a href="#check_alarm-2">check_alarm/2</a>, <a href="lama_alarm_h.html#set_alarm-1">lama_alarm_h:set_alarm/1</a>.</p>

<h3 class="function"><a name="start-0">start/0</a></h3>
<div class="spec">
<p><tt>start() -&gt; ok | {error, Reason}</tt><br></p>
</div><p>Start LAMA application.  This is a shortcut for
       application:start/1.</p>
<p><b>See also:</b> <a href="application.html#start-1">application:start/1</a>.</p>

<h3 class="function"><a name="stop-0">stop/0</a></h3>
<div class="spec">
<p><tt>stop() -&gt; ok | {error, Reason}</tt><br></p>
</div><p>Stop LAMA application.  This is a shortcut for
       application:stop/1.</p>
<p><b>See also:</b> <a href="application.html#stop-1">application:stop/1</a>.</p>

<h3 class="function"><a name="verify_config-1">verify_config/1</a></h3>
<div class="spec">
<p><tt>verify_config(TypedOptions::<a href="#type-typed_options">typed_options()</a>) -&gt; Options::<a href="#type-options">options()</a> | <a href="#type-throw">throw</a>({error, Reason})</tt><br></p>
</div><p>For each <code>Option</code> in the <code>Options</code> list
       perform type verification.</p>

<h3 class="function"><a name="verify_config-2">verify_config/2</a></h3>
<div class="spec">
<p><tt>verify_config(App::atom(), Options::TypedOptions) -&gt; ok | <a href="#type-throw">throw</a>({error, Reason})</tt>
<ul class="definitions"><li><tt>TypedOptions = <a href="#type-typed_options">typed_options()</a></tt></li></ul></p>
</div><p>Fetch selected options from the application's environment and
       perform type verification.</p>
<p><b>See also:</b> <a href="#get_app_env-4">get_app_env/4</a>.</p>

<h3 class="function"><a name="which_loggers-0">which_loggers/0</a></h3>
<div class="spec">
<p><tt>which_loggers() -&gt; {ok, Loggers}</tt>
<ul class="definitions"><li><tt>Loggers = [{Type, [Module::atom()]}]</tt></li><li><tt>Type = one | multi</tt></li></ul></p>
</div><p>Return a list of registered loggers.</p>

<h3 class="function"><a name="which_loggers-1">which_loggers/1</a></h3>
<div class="spec">
<p><tt>which_loggers(Type) -&gt; {ok, Loggers}</tt>
<ul class="definitions"><li><tt>Type = one | multi</tt></li><li><tt>Loggers = [Module::atom()]</tt></li></ul></p>
</div><p>Return a list of registered loggers.</p>
<hr>

<div class="navbar"><a name="#navbar_bottom"></a><table width="100%" border="0" cellspacing="0" cellpadding="2" summary="navigation bar"><tr><td><a href="overview-summary.html" target="overviewFrame">Overview</a></td><td><a href="http://www.erlang.org/"><img src="erlang.png" align="right" border="0" alt="erlang logo"></a></td></tr></table></div>
<p><i>Generated by EDoc, Oct 5 2012, 10:17:31.</i></p>
</body>
</html>
